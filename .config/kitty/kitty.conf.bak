# vim:fileencoding=utf-8:ft=conf:foldmethod=marker

# ===== THEME =====
include "current-theme.conf"

# ===== FONTS =====
font_family      iosevka medium
bold_font        iosevka bold
italic_font      iosevka italic
bold_italic_font iosevka bolditalic
font_size        10.5

adjust_line_height  0
adjust_column_width 0
disable_ligatures   never
box_drawing_scale   0.001, 1, 1.5, 2

# ===== CURSOR =====
cursor_shape                underline
cursor_blink_interval       -1
cursor_stop_blinking_after  15.0

# ===== SCROLLBACK =====
scrollback_lines            2000
scrollback_pager            less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER
scrollback_pager_history_size 0
wheel_scroll_multiplier     5.0
touch_scroll_multiplier     1.0

# ===== MOUSE =====
mouse_hide_wait           3.0
focus_follows_mouse       no
copy_on_select            yes
click_interval            -1.0
select_by_word_characters :@-./_~?&=%+#

# ===== URLs =====
url_style      single
open_url_with  default
url_prefixes   http https file ftp ftps gemini ssh
detect_urls    yes

# ===== TEXT =====
strip_trailing_spaces smart

# ===== PERFORMANCE =====
repaint_delay   10
input_delay     3
sync_to_monitor no

# Better rendering for modern displays
macos_option_as_alt yes
text_composition_strategy 1.0

# ===== BELL =====
enable_audio_bell    yes
visual_bell_duration 0.0
window_alert_on_bell yes
bell_on_tab          yes
command_on_bell      none

# ===== WINDOW =====
remember_window_size         yes
initial_window_width         640
initial_window_height        400
enabled_layouts              tall:bias=50;full_size=1;mirrored=false,stack,horizontal,grid
window_resize_step_cells     2
window_resize_step_lines     2
window_border_width          1.0
draw_minimal_borders         yes
window_margin_width          0.0
single_window_margin_width   -1000.0
window_padding_width         2.0
placement_strategy           center
inactive_text_alpha          1.0
hide_window_decorations      no
resize_debounce_time         0.1
resize_draw_strategy         static

# ===== TABS =====
tab_bar_edge         bottom
tab_bar_margin_width 0.0
tab_bar_min_tabs     2
tab_switch_strategy  previous
tab_separator        " â”‡"
tab_title_template   {title}
tab_bar_style        fade
tab_fade             1

# ===== TRANSPARENCY =====
background_opacity         0.80
dynamic_background_opacity no
dim_opacity                0.60

# ===== TERMINAL =====
shell                 /bin/zsh
editor                .
close_on_child_death  no
allow_remote_control  yes
listen_on             unix:/tmp/mykitty
allow_hyperlinks      yes
update_check_interval 0
notify_on_cmd_finish   unfocused 10.0
startup_session       none
clipboard_control     write-clipboard write-primary
term                  xterm-kitty
linux_display_server  auto

# ===== KEYBINDINGS =====
kitty_mod           ctrl+shift
clear_all_shortcuts no

# Clipboard
map kitty_mod+c     copy_to_clipboard
map kitty_mod+v     paste_from_clipboard
map kitty_mod+s     paste_from_selection
map shift+insert    paste_from_selection
map kitty_mod+o     pass_selection_to_program

# Scrolling
map kitty_mod+up        scroll_line_up
map kitty_mod+k         scroll_line_up
map kitty_mod+down      scroll_line_down
map kitty_mod+j         scroll_line_down
map kitty_mod+page_up   scroll_page_up
map kitty_mod+page_down scroll_page_down
map kitty_mod+home      scroll_home
map kitty_mod+end       scroll_end
map kitty_mod+h         show_scrollback

# Windows
map kitty_mod+enter new_window
map kitty_mod+n     new_os_window
map kitty_mod+w     close_window
map kitty_mod+]     next_window
map kitty_mod+[     previous_window
map kitty_mod+f     move_window_forward
map kitty_mod+b     move_window_backward
map kitty_mod+`     move_window_to_top
map kitty_mod+r     start_resizing_window
map kitty_mod+1     first_window
map kitty_mod+2     second_window
map kitty_mod+3     third_window
map kitty_mod+4     fourth_window
map kitty_mod+5     fifth_window
map kitty_mod+6     sixth_window
map kitty_mod+7     seventh_window
map kitty_mod+8     eighth_window
map kitty_mod+9     ninth_window
map kitty_mod+0     tenth_window

# Tabs
map kitty_mod+right next_tab
map kitty_mod+left  previous_tab
map kitty_mod+t     new_tab
map kitty_mod+q     close_tab
map kitty_mod+.     move_tab_forward
map kitty_mod+,     move_tab_backward
map kitty_mod+alt+t set_tab_title
map kitty_mod+l     next_layout

# Better tab navigation with cmd key
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# Font size
map kitty_mod+equal     change_font_size all +2.0
map kitty_mod+minus     change_font_size all -2.0
map kitty_mod+backspace change_font_size all 0

# Hints
map kitty_mod+e         kitten hints
map kitty_mod+p>f       kitten hints --type path --program -
map kitty_mod+p>shift+f kitten hints --type path
map kitty_mod+p>l       kitten hints --type line --program -
map kitty_mod+p>w       kitten hints --type word --program -
map kitty_mod+p>h       kitten hints --type hash --program -
map kitty_mod+shift+e   open_url_with_hints

# Session management
map kitty_mod+alt+s launch --type=os-window --cwd=current
map kitty_mod+shift+h launch --type=overlay --cwd=~

# Git integration
map kitty_mod+g>d launch --type=overlay git diff
map kitty_mod+g>s launch --type=overlay git status
map kitty_mod+g>l launch --type=overlay git log --oneline -10
map kitty_mod+g>b launch --type=overlay git branch -v

# File monitoring
map kitty_mod+alt+w launch --type=overlay watch


# Misc
map kitty_mod+f11    toggle_fullscreen
map kitty_mod+f10    toggle_maximized
map kitty_mod+u      kitten unicode_input
map kitty_mod+f2     edit_config_file
map kitty_mod+escape kitty_shell window
map kitty_mod+delete clear_terminal reset active

# Opacity
map kitty_mod+a>m set_background_opacity +0.1
map kitty_mod+a>l set_background_opacity -0.1
map kitty_mod+a>1 set_background_opacity 1
map kitty_mod+a>d set_background_opacity default
